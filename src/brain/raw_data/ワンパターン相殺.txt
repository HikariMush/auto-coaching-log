ワンパターン相殺
概要
ワンパターン相殺
ワンパターン相殺のシステム
キューに記録される条件
ワンパターン相殺の計算
ワンパターン相殺とふっとばし力
撃墜%に与える影響
おまけ：ワンパターン補正係数について
注意が必要なもの
すべて「違う種類のワザ」としてカウントされるワザ
すべて「同じ種類のワザ」としてカウントされ、「派生・キャンセルするたびにキューに記録される」ワザ
すべて「同じ種類のワザ」としてカウントされるが、「派生してもキューに記録されない」ワザ
その他
その他
ワンパターン相殺の影響を受けないワザ
ワンパターン相殺が正しく機能しないことがあるワザ
コメント



概要
ワンパターン相殺（OP相殺）とは、「同じワザを何度も使うと、そのワザのダメージ（ふっとばし）が減少するペナルティが課されるシステム」のこと。
攻撃判定同士がぶつかった際に発生する、「相殺」のシステムとは異なるものである。
また、バナナやメタルブレードなどの「生成アイテム」には、ワンパターン相殺が発生しない。

直近でヒット／ガードさせた9回分のワザの中に、次にヒット／ガードさせるワザと同じものが含まれていた場合、後述の計算方法に基づいて与ダメージ量やふっとばし力などが減少する。
反対に、過去9回にわたって一度も同じワザを使用していなかった場合は、通常と比べて与ダメージ量やふっとばし力などが増加する。
これは、俗に「OPボーナス」と呼ばれる。

また、ワンパターン相殺のかかった攻撃のペナルティを軽くしようとして他のワザを当てることを「OPを回復する」と呼ぶ。
ワンパターン相殺は、一度撃墜されると初期状態にリセットされる。


トレーニングモード
トレーニングモードを含む一部のモードでは、標準でワンパターン相殺が適用されないように設定されている。
メニューから「ワンパターン相殺」をONにすると、大乱闘モードと同様にワンパターン相殺が適用されるようになる。
ちなみに、ONにする前に攻撃を当てていた場合は、その分もカウントされる。

ワンパターン相殺のシステムは、ほかほか補正のシステムと紐付けされており、どちらか片方だけをONにすることはできない。




ワンパターン相殺
ワンパターン相殺のシステム
ファイターがワザをヒットさせるか、ガードされると、
ファイターがヒットさせた／ガードされたワザはすべて記録されているが、ワンパターン補正の計算に用いられるのは、そのうち直近9回分のみである。
この過去9回分の履歴のことを、このページではキュー1、キュー2、･･･、キュー9と呼ぶ。
例えば、直前にヒットさせた／ガードされたワザは、キュー1に記録されている。

ワンパターン補正による影響は、あるワザのヒット／ガード履歴が、小さいキューに記録されているほど（直近であるほど）大きくなる。
例えば、キュー1にのみ記録されている場合と、キュー9にのみ記録されている場合とでは、その減少量に3.6倍の違いが出る。
具体的には、10.0%の攻撃判定は、前者では9.1%に、後者では9.75%になる。

また、あるワザのヒット／ガード履歴がいずれのキューにも記録されていない場合は、反対にボーナスとして1.05倍の補正がかかる。
したがって、通常の試合では、常に何らかのワンパターン補正が作用していることになる。
OPボーナスが適用される場合、10.0%の攻撃判定で10.5%のダメージを与えることが可能となる。


キューに記録される条件
ファイターに攻撃をヒットさせる。
のパートナーとのチコを含むが、のピクミンは含まない。
のバットウィズインとの因果律予測は、ワザをヒットさせた扱いにならないが、キューには保存される。
ただし、以下の場合を除く。
攻撃判定を自分にヒットさせた場合（）
当たりあり無敵のやられ判定に攻撃判定をヒットさせた場合
ダメージが0.0%の攻撃判定（風判定など）をヒットさせた場合

ファイターに攻撃をガードされる。
の盾を含むが、の盾とのファントムの盾は含まない。
ただし、ダメージが0.0%の攻撃判定（風判定など）をガードされた場合を除く。

一部の生成アイテムに攻撃をヒットさせる。
+
ヒットさせるとキューに記録される生成アイテム一覧

ステージ（及びステージオブジェクト）に攻撃をヒットさせる。

以下の場合はキューに記録されないので注意。
一部の生成アイテムや、生成オブジェクトに攻撃をヒットさせた。
+
ヒットさせてもキューに記録されない生成アイテム・オブジェクト一覧

相手の攻撃判定と相殺した。
ダメージの差が9.0%以上で判定を打ち消した場合も含む。

ワザをカウンター／反射された。
（リベンジ）（反逆ガード）は、カウンターではない。

ワザを吸収された。
に吸い込まれた。
からしまわれた。
にキャプチャーされた。
からウィッチタイムを発動された。

アピールの攻撃判定を敵にヒットさせた。
アピール自体にワンパターン補正は作用するがキューには記録されないため、常に1.05倍のワンパターン補正となる。




ワンパターン相殺の計算
各キューには、以下のような補正係数が設定されている。
キュー番号	S1	S2	S3	S4	S5	S6	S7	S8	S9
補正係数 [%]	9.000	8.545	7.635	6.790	5.945	5.035	4.255	3.345	2.500

Snはn番目のキューのワンパターン補正係数を意味し、100からその総和を引いたものがワンパターン補正倍率[%]となる。
ただし、ワンパターン補正が1.0となるときは、OPボーナスにより1.05倍となる。

例えば基礎ダメージが10.0%のワザを2・3・7回前にヒットさせている場合、ワンパターン補正は以下のようになる。
ワンパターン補正 = 100 - (S2 + S3 + S7)
　　　　　　　　 = 100 - (8.545 + 7.635 + 4.255) = 79.565 [%]
したがって、ワンパターン相殺を考慮した与ダメージは、10.0 * 0.79565 = 7.9565%となる。
ちなみに、キュー1からキュー9までが全て同じワザで占められている場合、ワンパターン補正は0.4695倍となる。

ワザをガードされたとき
SPから、ワザをガードされた場合にもワンパターン相殺のキューに記録されるようになった。
ただし、このときは補正係数Snを0.85倍してワンパターン補正を計算する。
リンク・こどもリンク・トゥーンリンク・勇者の盾で飛び道具を防がれた場合も同様である。

例えば基礎ダメージが10.0%のワザを1回前にガードされ、かつ5回前にヒットさせている場合、ワンパターン補正は以下のようになる。
ワンパターン補正 = 100 - (0.85 * S1 + S5)
= 100 - (0.85 * 9.0 + 5.945) = 86.405 [%]
したがって、ワンパターン相殺を考慮した与ダメージは、10.0 * 0.86405 = 8.6405%となる。


ワンパターン相殺とふっとばし力
ワンパターン相殺と補正値を考慮しない場合のふっとばし力は、以下のように計算される。
KB = {(0.1 + ダメージ * 0.05) * 敵% / W' * 1.4 + 18} * KBG * 0.01 + BKB
上式において、ワンパターン補正が影響を与えるのは、ダメージの部分と、敵%の部分のみである。
よって、ワンパターン補正はKBGが係る部分（横軸を蓄積ダメージ、縦軸をふっとばし力としたグラフにおける傾き）にのみ影響を与え、BKBの部分（グラフの切片）にまったく影響を与えないことが分かる。
つまり、攻撃判定のKBGが大きくBKBが小さいほど（BKBが占める割合が高いほど）、より顕著にワンパターン相殺の影響を受けることとなる。

具体的には、ふっとばし力の計算式のダメージの部分を以下のように置き換えることで、ワンパターン補正を考慮したふっとばし力を計算できる。
ダメージ（ワンパターン補正有） = ダメージ * (1 + 0.3 * (ワンパターン補正倍率 - 1))
また、与ダメージ自体も変化するため、（攻撃ヒット後の）敵%の部分も変化する。

上式から分かるように、ふっとばし力の計算において、ワンパターン相殺による与ダメージ量変化はその0.3倍しか影響しない*1。
これは、ワンパターン相殺による与ダメージ量変化がふっとばし力に影響を与えすぎないための措置であり、for以降から導入されている。


撃墜%に与える影響
フォックスの上スマッシュ攻撃を、地上にいるマリオにヒットさせた際の撃墜%を比較する（終点・ほかほかなし・最大ベク変）。
状況	キュー状況
123456789	撃墜%	OP補正値
過去9回にわたって
ワザをヒット・ガードされていない	_________	107%	1.05
直前にワザをヒットさせている	H________	115%	0.91
直前にワザをガードされている	G________	113%	0.9235
2回前にワザをヒットさせている	_H_______	114%	0.91455
2回前にワザをガードされている	_G_______	113%	0.9273675
9回前にワザをヒットさせている	________H	111%	0.975
直前2回連続でワザをガードされている	GG_______	117%	0.8508675

マルス／ルキナの上投げのマリオに対する撃墜%を比較する（終点・ほかほかなし・最大ベク変）。
マリオは189%（上投げ前）で撃墜するが、188%では撃墜しない。
188%のマリオを上投げすると蓄積ダメージが194.3%に増加するが、この状態のマリオを即上投げしてもマリオを撃墜できない。
1度でもつかみ打撃を入れればマリオを撃墜できる。


おまけ：ワンパターン補正係数について
+
開く




注意が必要なもの
すべて「違う種類のワザ」としてカウントされるワザ
ワザなど	対象ファイター	補足
弱攻撃派生
弱→百烈派生	共通	
強攻撃派生	
	
スマッシュ攻撃派生		
空中攻撃派生		バレットアーツは同じ種類のワザ。
通常ワザの強・弱		必殺ワザの強・弱は同じ種類のワザ。
ワザなど	対象ファイター	補足
ロックバスター		地上バスターと空中バスターのみ違う種類のワザとしてカウントされる。
弱攻撃と横強攻撃は同じ種類のワザとしてカウントされる。
チコ		ロゼッタの攻撃とチコの攻撃は違う種類のワザとしてカウントされる。
特殊コマンドワザ		3種類の特殊コマンドワザはそれぞれ独自のキューを使用する。
コマンド選択		基本的にはすべて違う種類のワザとカウントされるが、
以下のじゅもん同士は同じ種類のワザとカウントされる。
・ギラ／ベギラマ
・イオ／イオナズン
・ザキ／ザラキ
・かえん斬り／マヒャド斬り／まじん斬り／メタル斬り
超必殺ワザ		2種類の超必殺ワザはそれぞれ独自のキューを使用する。
いろいろ		(1) 弱攻撃と横強攻撃は、同じ種類のワザとしてカウントされる。
(2) 弱攻撃／横強攻撃と通常空中攻撃は、違う種類のワザとしてカウントされる。
-----地上／空中の判定は、ワザを出した時点を基準とする。
(3) 上強攻撃と上空中攻撃は、違う種類のワザとしてカウントされる。
-----地上／空中の判定は、ワザがヒットした時点を基準とする。
(4) 前空中攻撃（ツルハシ）と前空中攻撃（剣）は、同じ種類のワザとしてカウントされる。
(5) 後空中攻撃（ツルハシ）と後空中攻撃（剣）は、同じ種類のワザとしてカウントされる。


すべて「同じ種類のワザ」としてカウントされ、「派生・キャンセルするたびにキューに記録される」ワザ
ファイター	備考
	本体とオプションは、同一のキューを共有する。
また、本体とパートナーの攻撃の両方がヒットすると、2回分キューに記録される。
ただし、キューの更新がおこなわれるのはヒットストップ後。
	3体のポケモンは、同一のキューを共有する。
	ホムラとヒカリは、同一のキューを共有する。

例えばマーベラスコンビネーションを全段当てると、4段目は直前3回分のワンパターン補正がかかった状態となる。


すべて「同じ種類のワザ」としてカウントされるが、「派生してもキューに記録されない」ワザ
これらのワザは、派生して複数回攻撃を当ててもキューに保存されるのは1回のみとなる。
フ